<div id="<%= dom_id photo_album %>">
  <% album_hash = photo_album.present { |image| rails_storage_proxy_path(image.variant(resize_to_fit: [600, 600])) } %>
  <p>

  <div class="container">
    <div class="row g-0 justify-content-center">
      <div class="col-md-6">
        <%= render 'photos/cover', photo_album: album_hash %>
      </div>
    </div>
    <div class="row g-0 justify-content-center">
      <div class="col-md-3">
        <%= text_field_tag :name, params[:email], class: "form-control mb-5 simple-field", style: "text-align: center;", autocomplete: false, value: "#{album_hash[:name]}" %>
      </div>
    </div>

    <% album_hash['pages'].each_slice(2) do |left, right| %>
      <div class="row g-0 justify-content-center">
        <div class="col-md-6">
          <%= render 'photos/photo_page', page: left, style: "margin-right: 0px !important;", pos_class: 'clip-left' %>
        </div>
        <div class="col-md-6">
          <% if right %>
            <%= render 'photos/photo_page', page: right, style: "margin-left: 0px !important;", pos_class: 'clip-right' %>
          <% end %>
        </div>
      </div>

      <div class="row g-0 justify-content-around mt-4">
        <div class="col-md-3">
          <div class="row g-0 mb-3">
            <div class="col">
                <%= text_field_tag :address, params["#{left['id']}_address".to_sym], class: "form-control simple-field", style: "text-align: center;", autocomplete: false, value: "#{left['address']}" %>
            </div>
          </div>
          <div class="row g-0 justify-content-around">
            <div class="col" align="center">
              <button type="button" class="btn btn-outline-danger btn-transparent p-2" title="Delete page">
                <img src="../assets/img/trash.png" style="width:1.3rem; height:1.3rem" class="m-1">
              </button>
            </div>
            <div class="col" align="center">
              <button type="button" class="btn btn-outline-secondary btn-transparent p-2" title="Make Cover">
                <img src="../assets/img/book.png" style="width:1.3rem; height:1.3rem" class="m-1">
              </button>
            </div>
          </div>
        </div>

        <div class="col-md-3">
          <div class="row g-0 mb-3">
            <div class="col">
              <% if right %>
                <%= text_field_tag :address, params["#{right['id']}_address".to_sym], class: "form-control simple-field", style: "text-align: center;", autocomplete: false, value: "#{right['address']}" %>
              <% end %>
            </div>
          </div>
          <div class="row g-0 justify-content-around mb-5">
            <div class="col" align="center">
              <% if right %>
                <button type="button" class="btn btn-outline-danger btn-transparent p-2" title="Delete page">
                  <img src="../assets/img/trash.png" style="width:1.3rem; height:1.3rem" class="m-1">
                </button>
              <% end %>
            </div>
            <div class="col" align="center">
              <% if right %>
                <button type="button" class="btn btn-outline-secondary btn-transparent p-2" title="Make Cover">
                  <img src="../assets/img/book.png" style="width:1.3rem; height:1.3rem" class="m-1">
                </button>
              <% end %>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>
  </p>
</div>
